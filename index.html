<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Jose Parreno Garcia" />


<title>Installing R, Rstudio and R shiny in ubuntu</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Installing R, Rstudio and R shiny in ubuntu</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Installing R, Rstudio and R shiny in ubuntu</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Installing R, Rstudio and R shiny in ubuntu</h1>
<h4 class="author"><em>Jose Parreno Garcia</em></h4>
<h4 class="date"><em>March 2018</em></h4>

</div>

<div id="TOC">
<ul>
<li><a href="#install-r-base"><span class="toc-section-number">1</span> Install R-Base</a><ul>
<li><a href="#add-r-repository"><span class="toc-section-number">1.1</span> Add R repository</a></li>
<li><a href="#add-r-to-ubuntu-keyring"><span class="toc-section-number">1.2</span> Add R to Ubuntu Keyring</a></li>
<li><a href="#install-r-base-1"><span class="toc-section-number">1.3</span> Install R-Base</a></li>
</ul></li>
<li><a href="#installing-r-studio-desktop"><span class="toc-section-number">2</span> Installing R-studio desktop</a></li>
<li><a href="#installing-r-studio-server"><span class="toc-section-number">3</span> Installing R-studio server</a><ul>
<li><a href="#verify-the-installation"><span class="toc-section-number">3.1</span> Verify the installation</a></li>
<li><a href="#access-rstudio-server"><span class="toc-section-number">3.2</span> Access Rstudio-server</a></li>
</ul></li>
<li><a href="#installing-r-shiny-server"><span class="toc-section-number">4</span> Installing R-shiny server</a><ul>
<li><a href="#navigate-to-shiny-server"><span class="toc-section-number">4.1</span> Navigate to shiny server</a></li>
<li><a href="#installing-packages-at-a-system-level"><span class="toc-section-number">4.2</span> Installing packages at a system level</a></li>
<li><a href="#starting-shiny-server-if-problem-with-non-connection"><span class="toc-section-number">4.3</span> Starting shiny-server if problem with non-connection</a></li>
<li><a href="#hostings-app-in-shiny-server"><span class="toc-section-number">4.4</span> Hostings app in shiny-server</a><ul>
<li><a href="#changing-the-welcome-page"><span class="toc-section-number">4.4.1</span> Changing the welcome page</a></li>
<li><a href="#changing-the-html-file-in-optshiny-serversamples."><span class="toc-section-number">4.4.2</span> 1. Changing the html file in /opt/shiny-server/samples.</a></li>
<li><a href="#creating-a-mirror-link-to-another-html-file-living-elsewhere-in-the-system."><span class="toc-section-number">4.4.3</span> 2. Creating a mirror link to another html file living elsewhere in the system.</a></li>
</ul></li>
</ul></li>
</ul>
</div>

<style>
body {
text-align: justify}
</style>
<pre class="r"><code>library(knitr)</code></pre>
<p><br></p>
<div id="install-r-base" class="section level1">
<h1><span class="header-section-number">1</span> Install R-Base</h1>
<p><br></p>
<div id="add-r-repository" class="section level2">
<h2><span class="header-section-number">1.1</span> Add R repository</h2>
<p>First, we’ve got to add a line to our /etc/apt/sources.list file. This can be accomplished with the following.</p>
<pre class="code"><code>sudo echo &quot;deb http://cran.rstudio.com/bin/linux/ubuntu xenial/&quot; | sudo tee -a /etc/apt/sources.list</code></pre>
<p><img src="images/1.PNG" /><!-- --></p>
<p><br></p>
</div>
<div id="add-r-to-ubuntu-keyring" class="section level2">
<h2><span class="header-section-number">1.2</span> Add R to Ubuntu Keyring</h2>
<p><br></p>
<pre class="code"><code>gpg --keyserver keyserver.ubuntu.com --recv-key E084DAB9
gpg -a --export E084DAB9 | sudo apt-key add -</code></pre>
<p><img src="images/2.PNG" /><!-- --></p>
<p><br></p>
</div>
<div id="install-r-base-1" class="section level2">
<h2><span class="header-section-number">1.3</span> Install R-Base</h2>
<p><br></p>
<pre class="code"><code>sudo apt-get update
sudo apt-get install r-base r-base-dev</code></pre>
<p><img src="images/3.PNG" /><!-- --></p>
<p><br></p>
</div>
</div>
<div id="installing-r-studio-desktop" class="section level1">
<h1><span class="header-section-number">2</span> Installing R-studio desktop</h1>
<p><br></p>
<ul>
<li>Download Rstudio desktop version for Ubuntu</li>
</ul>
<pre class="code"><code>https://www.rstudio.com/products/rstudio/download/</code></pre>
<ul>
<li>Run following commands</li>
</ul>
<pre class="code"><code>sudo apt-get install gdebi-core
sudo gdebi [PATH TO DOWNLOADED RSTUDIO FILE]

# When installation is complete, run the following command to open Rstudio
rstudio</code></pre>
<p><img src="images/4.PNG" /><!-- --></p>
<p><br></p>
</div>
<div id="installing-r-studio-server" class="section level1">
<h1><span class="header-section-number">3</span> Installing R-studio server</h1>
<p><br></p>
<pre class="code"><code>wget https://download2.rstudio.org/rstudio-server-1.1.442-amd64.deb
sudo gdebi rstudio-server-1.1.442-amd64.deb</code></pre>
<p><br></p>
<div id="verify-the-installation" class="section level2">
<h2><span class="header-section-number">3.1</span> Verify the installation</h2>
<p><br></p>
<pre class="code"><code>sudo rstudio-server verify-installation</code></pre>
<p><br></p>
</div>
<div id="access-rstudio-server" class="section level2">
<h2><span class="header-section-number">3.2</span> Access Rstudio-server</h2>
<p><br></p>
<p>You can access Rstudio server through a web browser and port 8787, using your login credentials (your name and surname you use to access your ubuntu/linux machine)</p>
<pre class="code"><code>localhost:8787</code></pre>
<p><img src="images/5.PNG" /><!-- --></p>
<p><br></p>
</div>
</div>
<div id="installing-r-shiny-server" class="section level1">
<h1><span class="header-section-number">4</span> Installing R-shiny server</h1>
<p><br></p>
<ul>
<li>Install shiny package at a system level</li>
</ul>
<pre class="code"><code>sudo su - -c &quot;R -e \&quot;install.packages(&#39;shiny&#39;, repos=&#39;https://cran.rstudio.com/&#39;)\&quot;&quot;</code></pre>
<ul>
<li>Install shiny server</li>
</ul>
<pre class="code"><code>wget https://download3.rstudio.org/ubuntu-12.04/x86_64/shiny-server-1.5.6.875-amd64.deb
sudo gdebi shiny-server-1.5.6.875-amd64.deb</code></pre>
<p><br></p>
<div id="navigate-to-shiny-server" class="section level2">
<h2><span class="header-section-number">4.1</span> Navigate to shiny server</h2>
<p><br></p>
<ul>
<li>Shiny server is held by default in port 3838</li>
<li>If you have followed step by step the instructions above, you will see how there is an error in the shiny home page. In the red box, it is telling us that, if we had “rmarkdown” package installed <strong>at a system level</strong>, then this error shouldn’t happen (image below)</li>
</ul>
<p><img src="images/6.PNG" /><!-- --></p>
<p><br></p>
</div>
<div id="installing-packages-at-a-system-level" class="section level2">
<h2><span class="header-section-number">4.2</span> Installing packages at a system level</h2>
<ul>
<li>Using the command below, we can install any package we want that shiny will have to use.</li>
<li>For example, if you are developing a web app that using the “plotly” package, then you should have it installed at a system level</li>
<li>Let’s install rmarkdown and show how the eror doesn’t occur anymore.</li>
</ul>
<pre class="code"><code>sudo su - -c &quot;R -e \&quot;install.packages(&#39;rmarkdown&#39;, repos=&#39;https://cran.rstudio.com/&#39;)\&quot;&quot;</code></pre>
<p><img src="images/7.PNG" /><!-- --></p>
<p><br></p>
</div>
<div id="starting-shiny-server-if-problem-with-non-connection" class="section level2">
<h2><span class="header-section-number">4.3</span> Starting shiny-server if problem with non-connection</h2>
<p><br></p>
<pre class="code"><code>sudo systemctl start shiny-server</code></pre>
<p><br></p>
</div>
<div id="hostings-app-in-shiny-server" class="section level2">
<h2><span class="header-section-number">4.4</span> Hostings app in shiny-server</h2>
<div id="changing-the-welcome-page" class="section level3">
<h3><span class="header-section-number">4.4.1</span> Changing the welcome page</h3>
<ul>
<li>The main landing page for shiny-server (the page that you land on when you type localhost:3838), is an html file <strong>(/srv/shiny-server/index.html)</strong> that live in the /srv/shiny-server page.</li>
<li>Initially, the default setup for shiny server html file is a mirror of an html file living in <strong>/opt/shiny-server/samples.</strong>.</li>
<li>There are 2 options to change how the initial page looks like:</li>
</ul>
<ol style="list-style-type: decimal">
<li>Changing the html file in /opt/shiny-server/samples.</li>
<li>Creating a mirror link to another html file living elsewhere in the system.</li>
</ol>
<p>I personally prefer the second one because the first requires messing around with the permissions of a folder that is owned by root. Nevertheless, I will show both ways and you decide what to do.</p>
</div>
<div id="changing-the-html-file-in-optshiny-serversamples." class="section level3">
<h3><span class="header-section-number">4.4.2</span> 1. Changing the html file in /opt/shiny-server/samples.</h3>
<ul>
<li>The folder is owned by root, and it’s quite sensitive (meaning that we cannot copy/paste or change anything in it).</li>
<li>Create a new html file (or just make a copy of the welcome.html) and save it /opt/shiny-server-/samples, with a different name than welcome.html. Lets say, for example, shiny_ds_welcome.html.</li>
<li>We will use the touch command with super user permissions on that file</li>
</ul>
<pre class="code"><code>sudo touch /opt/shiny-server/samples/shiny_ds_welcome.html```</code></pre>
<ul>
<li>Change the permission BUT ONLY OF THAT SPECIFIC FILE!. (you can change the :decisionscience to whatever group/user you want to give it permission to change)</li>
</ul>
<pre class="code"><code>sudo -H chown :decisionscience /opt/shiny-server/samples/shiny_ds_welcome.html 
sudo -H chmod 775 /opt/shiny-server/samples/shiny_ds_welcome.html</code></pre>
<ul>
<li>With this we have kept <strong>root</strong> as main owner of the file, then we added <strong>decisionscience</strong> as the group owner of the file, and we have given read-write-execute permission to root and decisionscience, but we kept only read and execute permissions for anything outside these groups.</li>
<li>The last step is changing the mirror link so that <strong>/srv/shiny-server/index.html</strong> points to <strong>/opt/shiny-server/samples/shiny_ds_welcome.html</strong>, instead of <strong>/opt/shiny-server/samples/welcome.html</strong>. Use the following command:</li>
</ul>
<pre class="code"><code>sudo -H ln -s [true directory - ie, the directory you have your app on] [linked directory - ie, the directory you are going to create the mirror to the true directory]</code></pre>
</div>
<div id="creating-a-mirror-link-to-another-html-file-living-elsewhere-in-the-system." class="section level3">
<h3><span class="header-section-number">4.4.3</span> 2. Creating a mirror link to another html file living elsewhere in the system.</h3>
<p>As mentioned before, I prefer this, because we dont have to touch the /opt folder. We just need to do the last step from before:</p>
<ul>
<li>Create the html file you want to have a landing page and save it anywhere you want</li>
<li>Change the mirror link so that <strong>/srv/shiny-server/index.html</strong> points to <strong>path to your file</strong>, instead of <strong>/opt/shiny-server/samples/welcome.html</strong></li>
</ul>
<p>Use the following command:</p>
<pre class="code"><code>sudo -H ln -s [true directory - ie, the directory you have your app on] [linked directory - ie, the directory you are going to create the mirror to the true directory]</code></pre>
</div>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
